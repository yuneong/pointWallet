## π—‚οΈ ERD λ‹¤μ΄μ–΄κ·Έλ¨

![ν¬μΈνΈ ERD](erd.png)

---

## π“κµ¬μ΅° μ„¤λ…

### 1. `user`
- ν¬μΈνΈλ¥Ό μ†μ ν•λ” μ‚¬μ©μ
- κΈ°λ³Έ μ‚¬μ©μ μ •λ³΄ (μ΄λ¦„, μ΄λ©”μΌ λ“±)

| μ»¬λΌλ… | μ„¤λ… |
|--------|------|
| `id` (PK) | μ‚¬μ©μ κ³ μ  ID |
| `name` | μ‚¬μ©μ μ΄λ¦„ |
| `email` | μ΄λ©”μΌ |
| `created_at` | μƒμ„±μΌμ‹ |

---

### 2. `point_wallet`
- μ‚¬μ©μλ³„ ν¬μΈνΈ μ§€κ°‘ (μ• κ·Έλ¦¬κ±°νΈ λ£¨νΈ)
- ν„μ¬ μ΄ μ”μ•΅, λ§μ§€λ§‰ λ³€κ²½ μ‹κ° λ“± κ΄€λ¦¬

| μ»¬λΌλ… | μ„¤λ… |
|--------|------|
| `id` (PK) | μ§€κ°‘ ID |
| `user_id` (FK) | μ†μ  μ‚¬μ©μ |
| `amount` | μ΄ μ”μ•΅ |
| `updated_at` | λ§μ§€λ§‰ μ—…λ°μ΄νΈ |

---

### 3. `point_charge`
- ν¬μΈνΈ μ¶©μ „ νΈλμ­μ…
- μ΄λ²¤νΈ, λ³΄μƒ, κ΄€λ¦¬ μ¶©μ „ λ“± κΈ°λ΅

| μ»¬λΌλ… | μ„¤λ… |
|--------|------|
| `id` (PK) | μ¶©μ „ ID |
| `wallet_id` (FK) | λ€μƒ μ§€κ°‘ |
| `amount` | μ¶©μ „ κΈμ•΅ |
| `reason` | μ¶©μ „ μ‚¬μ  |
| `expired_at` | λ§λ£ μμ •μΌ |

---

### 4. `point_usage`
- ν¬μΈνΈ μ‚¬μ© λ‚΄μ—­
- μ–΄λ””μ—, μ–Όλ§λ¥Ό μ‚¬μ©ν–λ”μ§€ κΈ°λ΅

| μ»¬λΌλ… | μ„¤λ… |
|--------|------|
| `id` (PK) | μ‚¬μ© ID |
| `wallet_id` (FK) | λ€μƒ μ§€κ°‘ |
| `usage_type` | μ‚¬μ©μ² (μ£Όλ¬Έ, μ„ λ¬Ό λ“±) |
| `target_id` | μ°Έμ΅° λ€μƒ (μ: μ£Όλ¬Έ ID) |
| `amount` | μ‚¬μ© κΈμ•΅ |

---

### 5. `point_history`
- ν¬μΈνΈ λ³€λ™ ν†µν•© κΈ°λ΅
- μ¶©μ „/μ‚¬μ©/μ†λ©Έ λ‚΄μ—­ μ΅°νμ©

| μ»¬λΌλ… | μ„¤λ… |
|--------|------|
| `id` (PK) | νμ¤ν† λ¦¬ ID |
| `wallet_id` (FK) | λ€μƒ μ§€κ°‘ |
| `change_type` | CHARGE, USAGE, EXPIRE |
| `amount` | λ³€λ™ κΈμ•΅ |
| `related_after` | λ³€λ™ ν›„ μ”μ•΅ |
| `created_at` | κΈ°λ΅ μ‹κ° |

---

## π”— ν…μ΄λΈ” κ΄€κ³„

- `User (1)` β† `PointWallet (1)`
- `PointWallet (1)` β† `PointCharge`, `PointUsage`, `PointHistory` (N)
